{% extends "base.html" %}

{% block title %}Sửa thiết bị phòng server{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="card-title mb-0">Cập nhật thông tin Phòng server</h2>
            <a href="{{ url_for('server_room') }}" class="btn btn-secondary">Quay lại</a>
        </div>
        <p><strong>{{ device.device_code }}</strong> - {{ device.name }}</p>
        <form method="POST" class="row g-3">
            <div class="col-md-3">
                <label class="form-label">Mã thiết bị</label>
                <input name="device_code" class="form-control" value="{{ device.device_code }}" required>
            </div>
            <div class="col-md-5">
                <label class="form-label">Tên thiết bị</label>
                <input name="name" class="form-control" value="{{ device.name }}" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Loại</label>
                <input name="device_type" class="form-control" value="{{ device.device_type }}">
            </div>
            <div class="col-md-3">
                <label class="form-label">Trạng thái sử dụng</label>
                <select name="usage_status" class="form-select">
                    {% set usage = info.usage_status if info else 'Đang hoạt động' %}
                    <option value="Đang hoạt động" {% if usage == 'Đang hoạt động' %}selected{% endif %}>Đang hoạt động</option>
                    <option value="Dừng" {% if usage == 'Dừng' %}selected{% endif %}>Dừng</option>
                </select>
            </div>
            <div class="col-md-5">
                <label class="form-label">Người quản lý</label>
                <select name="manager_id" class="form-select">
                    <option value="">-- Chưa gán --</option>
                    {% for u in users %}
                    <option value="{{ u.id }}" {% if device.manager_id == u.id %}selected{% endif %}>{{ u.full_name or u.username }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">Địa chỉ IP</label>
                <input name="ip_address" class="form-control" value="{{ info.ip_address if info else '' }}" placeholder="VD: 10.10.10.10">
            </div>
            <div class="col-12">
                <label class="form-label">Chạy dịch vụ</label>
                <input name="services_running" class="form-control" value="{{ info.services_running if info else '' }}" placeholder="VD: Web, DB, LDAP...">
            </div>
            <div class="col-12">
                <label class="form-label">Cấu hình</label>
                <textarea name="configuration" class="form-control" rows="3">{{ device.configuration }}</textarea>
            </div>
            <div class="col-12">
                <label class="form-label">Ghi chú</label>
                <textarea name="notes" class="form-control" rows="3">{{ device.notes }}</textarea>
            </div>
            <div class="col-12 d-flex justify-content-end">
                <button class="btn btn-primary">Lưu</button>
            </div>
        </form>
    </div>
 </div>
{% endblock %}
